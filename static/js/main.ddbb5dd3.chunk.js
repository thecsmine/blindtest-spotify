(this["webpackJsonpblindtest-spotify"]=this["webpackJsonpblindtest-spotify"]||[]).push([[0],{18:function(e,t,n){e.exports=n.p+"static/media/logo.79f6b6a0.svg"},19:function(e,t,n){e.exports=n.p+"static/media/loading.9d4cbf40.svg"},20:function(e,t,n){e.exports=n(49)},25:function(e,t,n){},26:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),i=n.n(r),c=(n(25),n(3)),l=n(18),s=n.n(l),u=n(19),m=n.n(u),d=(n(26),n(6)),p=n.n(d);n(48);var f=e=>o.a.createElement("button",{onClick:e.onClick},e.children);var g=e=>{const t=o.a.useState(""),n=Object(c.a)(t,2),a=n[0],r=n[1],i=o.a.useState(!1),l=Object(c.a)(i,2),s=l[0],u=l[1];return o.a.useEffect(()=>{null!==e.track&&(console.log(e.track.preview_url),r(e.track.preview_url))},[e]),null!==e.track?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"cover"},o.a.createElement("img",{src:e.track.album.images[0].url,alt:"track image",style:{width:300,height:300}}),o.a.createElement(f,{onClick:()=>u(!s)},s?"Pause":"Play")),o.a.createElement("div",{className:"progress-bar"},o.a.createElement("div",{style:s?{width:"100%",transition:"width linear 30s"}:{width:"0%",transition:"width 0s"}})),s?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{url:a,playStatus:p.a.status.PLAYING})):null):null},h=n(8),v=n.n(h);function w(e){let t=e.length;for(;t>0;){let a=(n=t,Math.floor(Math.random()*n));t--;let o=e[t];e[t]=e[a],e[a]=o}var n;return e}var E=()=>{const e=o.a.useState([]),t=Object(c.a)(e,2),n=t[0],a=t[1],r=o.a.useState(!1),i=Object(c.a)(r,2),l=i[0],u=i[1];o.a.useEffect(()=>{fetch("https://api.spotify.com/v1/me/tracks",{method:"GET",headers:{Authorization:"Bearer BQClQjtsZ-fiKKd3C3WfUUvay2iD0UuJaWejHjhRn8C3cc85p1KW3qISqCAb51YRstqZ0MyHogp03EwHlh95z3BC7WduSj-_npUOJlPJ8wqkoDUxGj3GZ78LI8-fjFBEoSSLd5eax2p8SkIt-dAnJoEP3bMa7WQyTyR-eiF4Mcqnb5f4nocIrWHbbA"}}).then(e=>e.json()).then(e=>{console.log("R\xe9ponse re\xe7ue ! Voil\xe0 ce que j'ai re\xe7u : ",e),u(!0),a(w(e.items))})},[]);const d=o.a.useMemo(()=>n&&n.length>0?n[0].track:null,[n]);return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:s.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",{className:"App-title"},"Bienvenue sur le Blindtest")),o.a.createElement("div",{className:"App-images"},l?o.a.createElement(g,{track:d}):o.a.createElement("img",{src:m.a,className:"loading",alt:"loading"})),o.a.createElement("div",{className:"App-buttons"},w(n.slice(0,3)).map((e,t)=>t<3?o.a.createElement(f,{key:e.track.name,onClick:()=>{return t=e.track.name,void(d.name===t?v.a.fire({title:"Bravo \ud83e\udd73",text:"Vous avez devin\xe9 la bonne musique :)",type:"success",confirmButtonText:"Continue playing",confirmButtonColor:"#33cc33"}).then(()=>{a(w([...n]))}):v.a.fire({title:"Dommage \ud83d\ude25",text:"Vous n'avez pas devin\xe9 la bonne musique :(",type:"warning",confirmButtonText:"Try again",confirmButtonColor:"#cc3333"}));var t}},e.track.name):null)))};const k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(E,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/blindtest-spotify",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/blindtest-spotify","/service-worker.js");k?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):b(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):b(e)})}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.ddbb5dd3.chunk.js.map